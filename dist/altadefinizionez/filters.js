"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizeArchiveSorting=exports.normalizeArchiveCountry=exports.normalizeArchiveLanguage=exports.normalizeArchiveRating=exports.normalizeArchiveYear=exports.normalizeArchiveGenre=exports.normalizeArchiveType=exports.ARCHIVE_SORT_OPTIONS=exports.ARCHIVE_COUNTRY_OPTIONS=exports.ARCHIVE_AUDIO_OPTIONS=exports.ARCHIVE_RATING_MAX=exports.ARCHIVE_RATING_MIN=exports.ARCHIVE_YEAR_MAX_OFFSET=exports.ARCHIVE_YEAR_MIN=exports.ARCHIVE_GENRES=exports.ARCHIVE_TYPE_OPTIONS=void 0;const DIACRITICS_REGEX=/[\u0300-\u036f]/g,normalizeKey=value=>value?value.trim().toLowerCase().normalize("NFD").replace(DIACRITICS_REGEX,"").replace(/[^a-z0-9]+/g,""):"";exports.ARCHIVE_TYPE_OPTIONS=[{title:"TV Show",titleKey:"TV Show",value:"series",providerValue:"2"},{title:"Movie",titleKey:"Movie",value:"movie",providerValue:"1"}],exports.ARCHIVE_GENRES=[{id:1,name:"Azione",title:"Action",titleKey:"Action"},{id:2,name:"Animazione",title:"Animation",titleKey:"Animation"},{id:3,name:"Avventura",title:"Adventure",titleKey:"Adventure"},{id:4,name:"Biografico",title:"Biography",titleKey:"Biography"},{id:5,name:"Commedia",title:"Comedy",titleKey:"Comedy"},{id:24,name:"Crime",title:"Crime",titleKey:"Crime"},{id:6,name:"Documentario",title:"Documentary",titleKey:"Documentary"},{id:7,name:"Drammatico",title:"Drama",titleKey:"Drama"},{id:8,name:"Erotico",title:"Erotic",titleKey:"Erotic"},{id:26,name:"Famiglia",title:"Family",titleKey:"Family"},{id:9,name:"Fantascienza",title:"Science Fiction",titleKey:"Science Fiction"},{id:10,name:"Fantasy",title:"Fantasy",titleKey:"Fantasy"},{id:11,name:"Giallo",title:"Mystery",titleKey:"Mystery"},{id:12,name:"Guerra",title:"War",titleKey:"War"},{id:13,name:"Horror",title:"Horror",titleKey:"Horror"},{id:14,name:"Musical",title:"Musical",titleKey:"Musical"},{id:15,name:"Poliziesco",title:"Police",titleKey:"Police"},{id:16,name:"Romantico",title:"Romance",titleKey:"Romance"},{id:23,name:"Storico",title:"Historical",titleKey:"Historical"},{id:17,name:"Spionaggio",title:"Spy",titleKey:"Spy"},{id:18,name:"Sportivo",title:"Sport",titleKey:"Sport"},{id:19,name:"Thriller",title:"Thriller",titleKey:"Thriller"},{id:20,name:"Western",title:"Western",titleKey:"Western"}],exports.ARCHIVE_YEAR_MIN=1960,exports.ARCHIVE_YEAR_MAX_OFFSET=0,exports.ARCHIVE_RATING_MIN=1,exports.ARCHIVE_RATING_MAX=10,exports.ARCHIVE_AUDIO_OPTIONS=[{title:"Italian",titleKey:"Italian",value:"ita",providerValue:"ITA"},{title:"Original (SUB-ITA)",titleKey:"Original (SUB-ITA)",value:"sub-ita",providerValue:"Sub ITA"}],exports.ARCHIVE_COUNTRY_OPTIONS=[{title:"Italy",titleKey:"Italy",value:"italy",providerValue:"Italia"},{title:"United States",titleKey:"United States",value:"usa",providerValue:"USA"},{title:"United Kingdom",titleKey:"United Kingdom",value:"uk",providerValue:"Regno Unito"},{title:"Spain",titleKey:"Spain",value:"spain",providerValue:"Spagna"},{title:"France",titleKey:"France",value:"france",providerValue:"Francia"},{title:"Germany",titleKey:"Germany",value:"germany",providerValue:"Germania"},{title:"Canada",titleKey:"Canada",value:"canada",providerValue:"Canada"},{title:"Japan",titleKey:"Japan",value:"japan",providerValue:"Giappone"},{title:"India",titleKey:"India",value:"india",providerValue:"India"},{title:"Australia",titleKey:"Australia",value:"australia",providerValue:"Australia"},{title:"Russia",titleKey:"Russia",value:"russia",providerValue:"Russia"},{title:"Belgium",titleKey:"Belgium",value:"belgium",providerValue:"Belgio"},{title:"Mexico",titleKey:"Mexico",value:"mexico",providerValue:"Messico"},{title:"Brazil",titleKey:"Brazil",value:"brazil",providerValue:"Brasile"},{title:"Poland",titleKey:"Poland",value:"poland",providerValue:"Polonia"},{title:"Norway",titleKey:"Norway",value:"norway",providerValue:"Norvegia"}],exports.ARCHIVE_SORT_OPTIONS=[{title:"Date",titleKey:"Date",value:"date",providerValue:"date"},{title:"Rating",titleKey:"Rating",value:"rating",providerValue:"toprating"},{title:"Name - A-Z",titleKey:"Name - A-Z",value:"title",providerValue:"title"},{title:"Trending Movies",titleKey:"Trending Movies",value:"popfilm",providerValue:"popfilm"},{title:"Trending TV Series",titleKey:"Trending TV Series",value:"popserie",providerValue:"popserie"},{title:"Most Anticipated",titleKey:"Most Anticipated",value:"soon",providerValue:"soon"}];const ARCHIVE_TYPE_MAP={movie:"1",movies:"1",film:"1",films:"1",serie:"2",series:"2",tv:"2",tvshow:"2",tvshows:"2",tvseries:"2",show:"2",shows:"2"},GENRE_ID_SET=new Set(exports.ARCHIVE_GENRES.map(genre=>genre.id)),GENRE_ID_BY_KEY=exports.ARCHIVE_GENRES.reduce((acc,genre)=>(acc[normalizeKey(genre.name)]=genre.id,acc[normalizeKey(genre.title)]=genre.id,acc),{}),ARCHIVE_LANGUAGE_MAP={ita:"ITA",italian:"ITA",italiano:"ITA",subita:"Sub ITA",sub:"Sub ITA",subitaoriginal:"Sub ITA",original:"Sub ITA",originale:"Sub ITA",originalsubita:"Sub ITA",subitaoriginale:"Sub ITA"},ARCHIVE_COUNTRY_MAP=exports.ARCHIVE_COUNTRY_OPTIONS.reduce((acc,country)=>(acc[normalizeKey(country.title)]=country.providerValue,acc[normalizeKey(country.providerValue)]=country.providerValue,acc[normalizeKey(country.value)]=country.providerValue,acc),{});ARCHIVE_COUNTRY_MAP.unitedstatesofamerica="USA",ARCHIVE_COUNTRY_MAP.unitedstates="USA",ARCHIVE_COUNTRY_MAP.us="USA",ARCHIVE_COUNTRY_MAP.u="USA",ARCHIVE_COUNTRY_MAP.uk="Regno Unito",ARCHIVE_COUNTRY_MAP.england="Regno Unito",ARCHIVE_COUNTRY_MAP.britain="Regno Unito",ARCHIVE_COUNTRY_MAP.greatbritain="Regno Unito";const ARCHIVE_SORT_MAP={date:"date",data:"date",latest:"date",newest:"date",recent:"date",toprating:"toprating",rating:"toprating",score:"toprating",valutazione:"toprating",title:"title",name:"title",nome:"title",az:"title",a:"title",nomeaz:"title",nameaz:"title",popfilm:"popfilm",trendingmovies:"popfilm",popularmovies:"popfilm",popserie:"popserie",trendingseries:"popserie",trendingtvseries:"popserie",popularseries:"popserie",soon:"soon",upcoming:"soon",mostanticipated:"soon",piuattesi:"soon"},normalizeMappedValue=(value,mapping)=>{if(!value)return;const normalized=normalizeKey(value);return normalized?mapping[normalized]||value.trim():void 0},normalizeArchiveType=value=>{if(!value)return;const trimmed=value.trim();if("1"===trimmed||"2"===trimmed)return trimmed;const normalized=normalizeKey(trimmed);return ARCHIVE_TYPE_MAP[normalized]};exports.normalizeArchiveType=normalizeArchiveType;const normalizeArchiveGenre=value=>{if(!value)return;const trimmed=value.trim();if(!trimmed)return;const parsed=Number.parseInt(trimmed,10);if(Number.isFinite(parsed)&&GENRE_ID_SET.has(parsed))return String(parsed);const normalized=normalizeKey(trimmed),resolved=GENRE_ID_BY_KEY[normalized];return resolved?String(resolved):void 0};exports.normalizeArchiveGenre=normalizeArchiveGenre;const normalizeArchiveYear=value=>{if(!value)return;const parsed=Number.parseInt(value.trim(),10);if(!Number.isFinite(parsed))return;const maxYear=(new Date).getFullYear()+exports.ARCHIVE_YEAR_MAX_OFFSET;return parsed<exports.ARCHIVE_YEAR_MIN||parsed>maxYear?void 0:String(parsed)};exports.normalizeArchiveYear=normalizeArchiveYear;const normalizeArchiveRating=value=>{if(!value)return;const parsed=Number.parseInt(value.trim(),10);return Number.isFinite(parsed)&&!(parsed<exports.ARCHIVE_RATING_MIN||parsed>exports.ARCHIVE_RATING_MAX)?String(parsed):void 0};exports.normalizeArchiveRating=normalizeArchiveRating;const normalizeArchiveLanguage=value=>{if(!value)return;const trimmed=value.trim();return"ITA"===trimmed||"Sub ITA"===trimmed?trimmed:normalizeMappedValue(trimmed,ARCHIVE_LANGUAGE_MAP)};exports.normalizeArchiveLanguage=normalizeArchiveLanguage;const normalizeArchiveCountry=value=>{if(value)return normalizeMappedValue(value,ARCHIVE_COUNTRY_MAP)};exports.normalizeArchiveCountry=normalizeArchiveCountry;const normalizeArchiveSorting=value=>{if(!value)return;const trimmed=value.trim();return"date"===trimmed||"toprating"===trimmed||"title"===trimmed||"popfilm"===trimmed||"popserie"===trimmed||"soon"===trimmed?trimmed:normalizeMappedValue(trimmed,ARCHIVE_SORT_MAP)};exports.normalizeArchiveSorting=normalizeArchiveSorting;